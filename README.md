# Snakegame

[TOC]

## 1. 整体框架部分



## 2. UI设计部分（qt）



## 3. 道具实现部分

> 主要涉及文件：item.h item.cpp

- 基本思路：item类有protected变量 loction。 各种道具都继承Item类，重写action 和 getName函数

#### 3.1  Food

- 简介：普通食物，增加的长度默认为 1, 可通过 changeAddLength() 修改

#### 3.2 Magnet

- 简介：吸铁石，让 Snake实例在 effective_time 时间里能吸收头部四周九宫格的 Food。effective_time 跟随全局时钟变化。
- 实现细节：检查

#### 3.3 Shield

- 简介：护盾，让 Snake实例在 effective_time 时间里具有护盾, 保护一次死亡。其中有effective_time变量 跟随全局时钟变化。(护盾的保护机制在 Snake类中实现)
- 实现细节：

#### 3.4 Firstaid

- 简介：血包，增加的血量默认为 1, 最多达到最大血量

- 实现细节：调整Snake中的health变量

#### 3.5 Obstacle

- 简介：障碍 不同障碍物有不同伤害量，默认为一。若蛇的health降至0，则死亡。
- 实现细节：调整Snake中的health变量

#### 3.6 Wall

- 简介：墙壁，和地图边界相同 撞击死亡
- 实现细节：runGame中检查是否撞墙，若撞墙则死亡

#### 3.7 Aerolite

- 简介：陨石，砸中头部死亡, 砸中身体则从砸中处截断以后部分
- 实现细节：runGame中进行检查

#### 3.8 Marsh

- 简介：沼泽 只要蛇任何一部分在沼泽上 都将被减速
- 实现细节：主函数runGame检查蛇是否在沼泽内，如果是，调慢这条蛇的local speed

## 4. 人机snake部分

> 主要涉及文件：aisnake.h aisnake.cpp

- 基本思路：继承Snake类，构建AIsnake类作为接口，后实现基于不同算法的Aisnake（受限于时间原因，只实现了两个基本的AIsnake）

#### 4.1 GreedyFood

- 简介：贪婪的寻找食物的蛇
- 实现细节：基于广度优先搜索，寻找食物，并前往食物

#### 4.2 WalkingSnake

- 简介：巡逻蛇，沿固定路径点巡逻的蛇
- 实现细节：基于AIsnake类中的go_to函数，加上队列数据类型的特性实现的

## 5. 关卡设计部分

> 主要涉及文件：game.cpp game.h

基本思路：因为一开始认为关卡间可能需要实现某个时间出现某个物体的需要，故不同关卡间逻辑并不一定相似，故选择继承Game类，是需要重写runGame 和 initializeGame 函数。（事实上由于时间限制，只有最后一关需要人机蛇死亡再生成一个人机蛇，重写了runGame，其他只是重写了initializeGame）

level设计：level改变蛇初始的移动速度，使得玩家操作难度不同，根据挑战的不同难度，通关后有不同星级的显示

#### 5.1 第一关

基础关卡， 同基础版的逻辑一样，胜利目标是吃掉五个食物。

#### 5.2 第二关

加入墙，沼泽，以及ctrl加速功能 ---> 第一关是不是也能加速？

#### 5.3 第三关

前面道具的一个整合，本关可以通过完整走过中间的迷宫，或者在外面吃完通关

#### 5.4 第四关

加入巡逻蛇

#### 5.5 第五关

 加入吸铁石

#### 5.6 第六关

加入血包和障碍物

#### 5.7 第七关

整合关卡，增加可玩性

#### 5.8 第八关

整合关卡，增加可玩性

#### 5. 9 第九关

加入护盾

#### 5.10 第十关

加入陨石

#### 5.11 第十一关

终极整合

#### 5.12 第十二关

彩蛋关，趣味杀蛇模式

## 6. 其他

#### 6.1 编译环境

windows11 在[qt creator]()中编译

#### 6.2 继续可能的开发方向

- 血包，障碍物等改变血量的值容易调整（留有接口）利用qt读入改变血量的值调整透明度可以实现不同改变血量的血包，障碍物
- 关卡可以加入时间触发等其他的道具触发方式（通过重写runGame实现）
- AISnake可以使用更加高级的算法，包括加入接口，利用ppo，ddpg等算法实现聪明的蛇
- 实现无尽模式+排行榜
- ……
